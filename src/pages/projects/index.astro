---
import { getCollection } from "astro:content";
import Base from "../../layouts/Base.astro";

const projects = (
  await getCollection("projects", ({ data }) => !data.draft)
).sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Base
  title="Projects - Abhin Rustagi"
  description="Selected projects and case studies from my work over the years with different startups."
>
  <section>
    <div class="container section-wrapper">
      <h2 class="section-title">Projects</h2>
      <p class="text-muted desc">
        Projects I've worked on for fun or as a side hustle.
      </p>

      {
        projects.length === 0 ? (
          <p class="empty text-muted">No projects yet. Check back soon.</p>
        ) : (
          <div class="timeline">
            {projects.map((project, i) => (
              <div
                class={`timeline-item animate-in animate-in-delay-${Math.min(i + 1, 4)}`}
              >
                <div class="timeline-content">
                  <a href={`/projects/${project.id}`} class="work-link">
                    {project.data.title}
                  </a>
                  <p class="work-desc">
                    {project.data.client}
                    {" / "}
                    {project.data.description}
                  </p>
                </div>
                <span class="timeline-date">
                  {project.data.date.getFullYear()}
                </span>
              </div>
            ))}
          </div>
        )
      }
    </div>
  </section>
</Base>

<style>
  .desc {
    margin-bottom: var(--space-xl);
  }

  .page-header {
    margin-bottom: var(--space-xl);
  }

  .page-header h1 {
    margin-bottom: var(--space-sm);
  }

  .empty {
    padding: var(--space-xl) 0;
  }

  .work-link {
    font-family: var(--font-sans);
    font-weight: 500;
    font-size: 1rem;
    color: var(--text);
  }

  .work-link:hover {
    color: var(--accent);
  }

  .work-desc {
    margin: var(--space-xs) 0 0;
    font-size: 0.9375rem;
    color: var(--text-muted);
  }

  .work-tech {
    margin: var(--space-xs) 0 0;
    font-size: 0.8125rem;
    color: var(--text-muted);
    opacity: 0.8;
  }
</style>
